
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to fix image upload with FCKEditor and ASP.NET - Felipe Lima</title>
  <meta name="author" content="Felipe Lima">

  
  <meta name="description" content="CKEditor is a great open source wysiwyg editor for the web. It was formerly called FCKEditor and, one of its previous versions contained a nice &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://felipecsl.com/blog/2009/10/03/how-to-fix-image-upload-with-fckeditor-and-asp-net">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Felipe Lima" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Quattrocento+Sans|Roboto:400,300' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26310657-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body>
	<div class="container">
		<aside class="left">
			<div class="inner-left">
				<header>
					<img src="http://www.gravatar.com/avatar/7fd4ba468da56bb5330a6352c1b54f52?s=200" alt="Gravatar of Felipe Lima " title="Gravatar of Felipe Lima" class="profilepic" />
<hgroup>
  <h1><a href="/">Felipe Lima</a></h1>
  
    <h2 class="subtitle">@felipecsl</h2>
   
</hgroup>


				</header>
				<footer>
					<p>
	
		<a href="http://github.com/felipecsl" class="btn btn-dark">GitHub</a>
	
	
		<a href="http://twitter.com/felipecsl" class="btn btn-dark">Twitter</a>
	
</p>
				</footer>
			</div>
		</aside>
    	<section class="right">
    		<div class="inner-right">
    			<div id="posts">
    			  	<article class="post">
    
  <header>
    
      <h1 class="entry-title">How to Fix Image Upload With FCKEditor and ASP.NET</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-03T08:52:00-03:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="/admin/Pages/ckeditor.com">CKEditor</a> is a great open source wysiwyg editor for the web. It was formerly called FCKEditor and, one of its previous versions contained a nice implementation for ASP.NET integration. The current version (3.0) has been completely rebuilt from scratch and does not support quick upload yet (I read in the forums it will be available in version 3.1).</p>

<p>I&rsquo;ve been using the FCKEditor  2.6.3 for .NET, which includes an ASP.NET control for seamless integration. However, I could never make one of its great features to work: the ability to upload images on the fly and embed them in the text. There are some things that need to be set up before.</p>

<pre><code>1. FCKEditor config file (fckconfig.js), when you download it, comes with its connectors default language to php. You need to change it to aspx:



var _FileBrowserLanguage    = 'aspx' ;  // asp | aspx | cfm | lasso | perl | php | py 


var _QuickUploadLanguage    = 'aspx' ;  // asp | aspx | cfm | lasso | perl | php | py  




2. Configure the folder that contains the fckeditor scripts in FCKEditor.cs (You will need to create a virtual directory in IIS with this path):






[ DefaultValue( "/fckeditor/" ) ]






public string BasePath 






3. Enable the upload connector in fckeditor\editor\filemanager\connectors\aspx\config.ascx (SECURITY WARNING: do not forget to implement    authentication verification here!):






private bool CheckAuthentication()






{ return true; }






4. Configure the directory that will receive the uploaded images (same file as above) - This can be overriden in your website web.config appSettings    section, creating a setting called FCKeditor:UserFilesPath






UserFilesPath = "/userfiles/";
</code></pre>

<p>This should be  everything that is needed in order to make file upload to work. See ya!</p>

<p>For those of you that saw this working fine in your development machine but  unexplainably not working on the production server, please refer to <a href="http://cksource.com/forums/viewtopic.php?f=6&amp;t=12112">this forum post</a> for the fix.</p>

<p>Another issue that I found regarding the update above is that in a server, it did not fix the problem an I was getting a &lsquo;permission denied&rsquo; JS error on the window.parent.OnUploadCompleted event. If that happens, try <a href="http://dev.fckeditor.net/ticket/2115">this fix</a> (scroll to the bottom of the page for the code)</p>
</div>


</article>


        <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://felipecsl.com/blog/2009/10/03/how-to-fix-image-upload-with-fckeditor-and-asp-net/" data-via="felipecsl" data-counturl="http://felipecsl.com/blog/2009/10/03/how-to-fix-image-upload-with-fckeditor-and-asp-net/" >Tweet</a>
  
  
  
</div>





    			</div>
    			<footer id="footer">
    				<p class="credit">
  Copyright &copy; 2014 - Felipe Lima. Powered by <a href="http://octopress.org">Octopress</a>
</p>


    			</footer>
    			







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<link href='http://fonts.googleapis.com/css?family=Quattrocento+Sans|Roboto:400,300' rel='stylesheet' type='text/css'>


  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26310657-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>




    		</div>
    	</section>
  	</div>
</body>
</html>
