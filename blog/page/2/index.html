
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Felipe Lima</title>
	<meta name="author" content="Felipe Lima">

	
	<meta name="description" content="Apr 17th, 2011 Dica De Ferramenta Para Mac: TotalFinder Assistindo esse screencast muito interessante do Paul Irish sobre o build script do ótimo &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Felipe Lima" type="application/atom+xml">
	
	<link rel="canonical" href="http://felipecsl.com/blog/page/2/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-26310657-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/7fd4ba468da56bb5330a6352c1b54f52?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="http://about.me/felipecsl">About</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
			<a class="google" href="https://plus.google.com/FelipeLimaf" rel="author" title="Google+">Google+</a>
		
		
			<a class="twitter" href="http://twitter.com/felipecsl" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/felipecsl" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/felipecsl">felipecsl</a> @ <a href="http://twitter.com">Twitter</a></small>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('felipecsl', 4, false);
	})(jQuery);
</script>


			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-04-17T16:05:11-03:00" data-updated="true" itemprop="datePublished">Apr 17<span>th</span>, 2011</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/04/17/dica-de-ferramenta-para-mac-totalfinder/" itemprop="url">Dica De Ferramenta Para Mac: TotalFinder</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Assistindo <a href="http://net.tutsplus.com/tutorials/html-css-techniques/automated-optimization-with-html5-boilerplate-build/">esse</a> screencast muito interessante do Paul Irish sobre o build script do ótimo projeto HTML5 boilerplate, também criado por ele mesmo, prestei atenção nas ferramentas que ele utiliza no Mac. Entre elas, pude notar o <a href="http://www.iterm2.com/#/section/home">iTerm 2</a>, que é um ótimo substituto para o Terminal padrão do Mac, e o excelente <a href="http://totalfinder.binaryage.com/">TotalFinder</a>, que adiciona várias funcionalidades muito úteis ao Finder padrão, como Tabs e Cut &amp; Paste por exemplo, ambas extremamente úteis, na minha opinião. Fica aqui então a recomendação destas duas ótimas ferramentas pra Mac, especialmente o TotalFinder :)</p>

<p>Até mais!</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-03-29T21:54:44-03:00" data-updated="true" itemprop="datePublished">Mar 29<span>th</span>, 2011</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/03/29/o-que-eu-aprendi-empreendendo-e-porque-voce-tambem-deveria-tentar/" itemprop="url">O Que Eu Aprendi Empreendendo E Porque Você Também Deveria Tentar</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Me motivei a escrever um pouco sobre empreendedorismo pois tenho visto muitas pessoas que no fundo têm vontade de inovar, empreender, mudar, mas geralmente sentem medo de dar uma virada brusca em suas vidas, sair da zona de conforto e arriscar. Pois eu vou relatar um pouco sobre o que eu aprendi com isso tudo durante o último ano, em que eu me envolvi bastante com este tópico.</p>

<p>Em primeiro lugar, vejo o perfil de empreendedor como sendo, antes de tudo, um <em>mindset.</em> Você não precisa desistir do seu emprego, abrir uma empresa, arriscar tudo o que tem tentando um negócio feito louco só pra ver como é empreender. Vejo este perfil em algumas pessoas que não necessariamente arriscaram tudo, assim como eu fiz, mas mesmo assim possuem este <em>mindset.</em> Eu me refiro a pensar &ldquo;fora da caixa&rdquo;, inovar, arriscar, tentar coisas diferentes. Essa semana um aluno de Ciência da Computação da UFRGS criou um site chamado <a href="http://poabus.com.br">poabus.com.br</a> para mapear as linhas de ônibus de Porto Alegre, já que o sistema que a EPTC oferece é praticamente inusável. Eu certamente diria que este cidadão chamado Bruno Jurkovski tem um perfil empreendedor, pois teve atitude para pensar diferente e experimentar uma nova solução para um problema existente. Eu diria que este tipo de perfil já caracteriza um empreendedor. Ou seja, você não precisa largar seu emprego de full-time para ser um empreendedor. Você pode começar hoje mesmo pensando em como você pode fazer alguma coisa para mudar o mundo à sua volta, utilizar as suas <em>skills</em> para contribuir para um mundo melhor. Um bom começo é contribuir para um projeto open source, por exemplo. Caso você não seja da área de TI, procure outras formas de inovar, solucionar problemas e deixe sua contribuição para a humanidade fazendo algo diferente, que tenha impacto sobre o mundo ao seu redor.</p>

<p>Alguns podem se perguntar &ldquo;por que&rdquo;? Por que isso é legal? O que eu ganho com isso? Eu posso afirmar que você ganha muito, tanto como pessoa, quanto como profissional. No meu caso, como um dos fundadores da <a href="http://quavio.com.br">Quavio</a>, aprendi tanto em um ano como se tivesse se passado 5 anos. Você aprende aquilo que nenhum colégio te ensina: como se virar sozinho, como contratar um funcionário, como cuidar das finanças da empresa, como atender bem o cliente, como vender o seu produto, como se posicionar no mercado, entre muitas outras coisas que você acaba nem notando! No final das contas, o resultado disso tudo é que você acaba se tornando uma pessoa melhor. E isto é extraordinário! Fundar uma empresa pra mim foi uma tempestade de novas experiências a cada dia. Não vou dizer que tudo são mil maravilhas, pois não são. Você acaba tendo que engolir muito sapo, aceitar críticas, aceitar perder, errar, cair e tentar novamente. Errar faz parte do processo diário. É apenas errando que realmente aprendemos como não fazer :)</p>

<p>Certa vez eu li em algum lugar que, geralmente, aquilo que te faz sentir um nervoso, um frio na barriga e apreensão é aquilo que te trará um aprendizado que não irá esquecer. E isto acontece todo dia na vida de um empreendedor :)</p>

<p>Hoje não faço mais parte da Quavio por motivos principalmente financeiros meus, entretanto, mantenho meu <strong>mindset</strong> empreendedor, sempre tentando encontrar maneiras de resolver problemas de um jeito diferente. É por isso que este tipo de pessoa costuma sempre ter uma idéia brilhante para compartilhar e receber feedback de um amigo. Até porque, se você acha que a sua idéia é brilhante e valiosa demais para ser aberta para os outros, provavelmente você está errado :) Se você tem medo que alguém roube sua idéia revolucionária, não se preocupe com isso. Uma idéia não vale nada. Muito mais vale uma idéia bem executada. Se alguém roubar a sua idéia e colocá-la em prática, isto significa que provavelmente aquela era a pessoa certa para executá-la, e não você :)</p>

<p>Atualmente tenho me dedicado a um projeto pessoal com alguns amigos, chamado <a href="http://noitehoje.com.br">Noite Hoje</a>. Nossa idéia é mudar a maneira como as pessoas procuram uma festa ou um show para ir, acessando de uma maneira simples e rápida de qualquer lugar, tanto o seu computador, quando seu smartphone.</p>

<p>Para quem quiser ler mais, o site <a href="http://www.softwarebyrob.com/">Software by Rob</a> é focado no assunto e tem ótimas boas leituras. Enfim, espero ter plantado a semente em alguém que esteja se sentindo desconfortável com a sua atual situação de vida e quer dar um real sentido para ela. Este é o seu momento hehehe.</p>

<p>Até a próxima :D</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-01-31T21:00:08-02:00" data-updated="true" itemprop="datePublished">Jan 31<span>st</span>, 2011</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/01/31/heroku-mongohq-mongoid/" itemprop="url">Heroku + MongoHQ + Mongoid</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>O <a href="http://heroku.com">Heroku</a> possui um Add-on muito interessante para trabalhar com <a href="http://www.mongodb.org/">MongoDB</a> chamado <a href="https://mongohq.com/home">MongoHQ</a>. Como de costume, existe tanto um plano grátis, quanto planos pagos.</p>

<p>Isso significa que é possível levantar um site com Ruby on Rails ou Sinatra e MongoDB rapidinho e sem desembolsar um centavo com o Heroku.. Damn good.</p>

<p>Como nem tudo é perfeito, a <a href="http://docs.heroku.com/mongohq#gem-options-and-setup">documentação</a> do add-on MongoHQ ainda é um tanto quanto &ldquo;magra&rdquo; e praticamente nem fala no Mongoid. Perdi uns vários minutos googleando e nada. Até que então encontrei o método from_uri na classe Connection do driver de mongo para Ruby.</p>

<p>Ao habilitarmos este add-on, o Heroku seta uma variável de ambiente chamada MONGOHQ_URL, que utilizamos para estabelecer a conexão com o Mongo server. Não encontrei em lugar nenhum como fazer esta conexão, então deixo aqui caso alguém precise:</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-01-11T13:03:33-02:00" data-updated="true" itemprop="datePublished">Jan 11<span>th</span>, 2011</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/01/11/problemas-com-iframe-no-ie/" itemprop="url">Problemas Com IFrame No IE?</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Pois é. Você não é o único. Apesar de funcionar às mil maravilhas em outros navegadores, o IE parece considerar o IFrame uma ameaça de segurança e se recusa a aceitar cookies de sites de terceiros dentro de um IFrame. Legal né? Isto dificulta qualquer tentativa de colocar um formulário de login dentro de um IFrame, por exemplo ou, ainda mais comum, colocar a janela de pagamento de um gateway (no meu caso, <a href="https://pagseguro.uol.com.br/">PagSeguro</a>) dentro de um IFrame funcionando como uma sobretela. Isto funciona perfeitamente, mas não no IE.</p>

<p>A questão toda é que o IE não irá aceitar nenhum cookie do PagSeguro, pois ele está fora do domínio principal do site que está sendo acessado no momento (o site onde você está tentando comprar algum produto, por exemplo). A maneira para contornarmos esse problema, seria implementando um mecanismo chamado <a href="http://www.w3.org/P3P/">P3P</a>.O que este negócio aí faz, é criar um mecanismo de expor para o browser qual é a política de privacidade do site de maneira programática (através de um cabeçalho no response).</p>

<p>Exemplo:</p>

<pre><code>response["P3P"] = 'CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'
</code></pre>

<p>Cada uma destas siglas de 3 ou 4 letras acima tem um significado, como por exemplo, expor como o site utiliza os dados do usuário. Esta propriedade deve ser incluida no cabeçalho de todas as páginas que setam um cookie no browser. Mais informações <a href="http://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer">aqui</a> e <a href="http://adamyoung.net/IE-Blocking-iFrame-Cookies">aqui</a>.</p>

<p>Isto é o que acontece quando os seus cookies forem bloqueados :)</p>

<p><a href="/images/2011/01/p3p.png"><img src="/images/2011/01/p3p-300x211.png" alt="" /></a></p>

<p>No caso do PagSeguro, o que acabava acontecendo é um erro dizendo &ldquo;Sua sessão expirou.&rdquo;.</p>

<p>Na minha opinião, é responsabilidade do PagSeguro implementar P3P em suas páginas para possibilitar que os desenvolvedores possam utilizar este recurso, já que, como não temos controle sobre o PagSeguro, não temos como implementar o cabeçalho customizado do P3P nas responses.</p>

<p>Com isso, acabamos tendo que mudar a interface para não utilizarmos mais o IFrame, pois não encontramos solução para o problema!</p>

<p>Bom, fica aí mais um motivo pra você que já odiava o IE, agora tem um motivo a mais :D</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2010-12-12T20:45:15-02:00" data-updated="true" itemprop="datePublished">Dec 12<span>th</span>, 2010</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2010/12/12/problemas-de-timezone-com-ruby/" itemprop="url">Problemas De Timezone Com Ruby?</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Timezones podem ser uma dor de cabeça quando trabalhamos muito com datas. Em ruby, existem pelo menos três classes diferentes para manipulação de data/hora: Date, Time e DateTime.</p>

<p>O nosso grande problema foi que, ao salvar uma data/hora no banco mySQL via ActiveRecord, o timezone estava sendo normalizado para UTC +00:00, enquanto o timezone do sistema é GMT -02:00, pois estamos em horário brasileiro de verão. Normalmente seria GMT -03:00).</p>

<p>Isto se torna um problema quando precisamos comparar datas, que vêm do banco de dados, com a data atual. Utilizando Time.now, estávamos observando um offset de 2h dado pela diferença entre o timezone do banco e o do sistema.</p>

<p>Para solucionar o problema, precisamos normalizar os dois objetos para o mesmo timezone. Resolvemos isto utilizando o método Time.utc, que monta um novo objeto Time baseado no UTC:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">ApplicationHelper</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">get_utc_time</span>
</span><span class='line'>    <span class="n">now</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span>
</span><span class='line'>    <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">sec</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Caso alguém tenha uma solução mais elegante para o problema, aceito sugestões :)</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2010-11-23T11:44:42-02:00" data-updated="true" itemprop="datePublished">Nov 23<span>rd</span>, 2010</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2010/11/23/traduzindo-html-utilizando-a-api-do-google-translate/" itemprop="url">Traduzindo HTML Utilizando a API Do Google Translate</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Pessoal,</p>

<p>Para quem quiser utilizar a API do Google Translate para traduzir partes de um documento HTML, segue uma implementação que tive que fazer recentemente utilizando jQuery e ASP.NET MVC:</p>

<ul>
<li>Controller Action para fazer o request para a API REST:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[ValidateInput(false)]</span>
</span><span class='line'><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Translate</span><span class="p">(</span><span class="n">FormCollection</span> <span class="n">vars</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="kt">string</span> <span class="n">reqUri</span> <span class="p">=</span> <span class="s">&quot;https://www.googleapis.com/language/translate/v2?key=YOUR_GOOGLE_API_KEY&amp;source=pt&amp;target=en&amp;format=html&quot;</span><span class="p">;</span><span class="err">`</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">var</span> <span class="n">webRequest</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="n">reqUri</span><span class="p">);</span><span class="err">`</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">webRequest</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">webRequest</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">&quot;POST&quot;</span><span class="p">;</span><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="kt">byte</span><span class="p">[]</span> <span class="n">bytes</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="n">GetBytes</span><span class="p">(</span><span class="s">&quot;q=&quot;</span> <span class="p">+</span> <span class="n">vars</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="p">]);</span>
</span><span class='line'><span class="n">webRequest</span><span class="p">.</span><span class="n">ContentLength</span> <span class="p">=</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
</span><span class='line'><span class="n">webRequest</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;X-HTTP-Method-Override&quot;</span><span class="p">,</span> <span class="s">&quot;GET&quot;</span><span class="p">);</span><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="k">using</span> <span class="p">(</span><span class="n">Stream</span> <span class="n">outputStream</span> <span class="p">=</span> <span class="n">webRequest</span><span class="p">.</span><span class="n">GetRequestStream</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'><span class="n">outputStream</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">using</span> <span class="p">(</span><span class="n">WebResponse</span> <span class="n">webResponse</span> <span class="p">=</span> <span class="n">webRequest</span><span class="p">.</span><span class="n">GetResponse</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="n">webResponse</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="k">return</span> <span class="k">null</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">using</span> <span class="p">(</span><span class="n">StreamReader</span> <span class="n">sr</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="n">webResponse</span><span class="p">.</span><span class="n">GetResponseStream</span><span class="p">()))</span> <span class="p">{</span>
</span><span class='line'><span class="k">return</span> <span class="nf">Content</span><span class="p">(</span><span class="n">sr</span><span class="p">.</span><span class="n">ReadToEnd</span><span class="p">().</span><span class="n">Trim</span><span class="p">(),</span> <span class="s">&quot;text/json&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Algumas considerações sobre esta action:</p>

<ul>
<li><p>Não estamos validando o parâmetro <strong>q</strong> de entrada. Seria interessante validar a presença deste parâmetro no form e lançar uma exceção caso ele não esteja presente;</p></li>
<li><p>Não esqueça de passar para o parâmetro <strong>key</strong> a sua chave da API do google;</p></li>
<li><p>Uma melhoria seria receber via form também o código do idioma fonte e destino (parâmetros <strong>source</strong> e <strong>target</strong> da URL).</p></li>
</ul>


<p>Vamos agora para o código de cliente (JavaScript) para atualizar a view:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">translateUrl</span> <span class="o">=</span> <span class="s1">&#39;&lt;%= Url.Action(&quot;Translate&quot;) %&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="nx">translateElement</span><span class="p">(</span><span class="s2">&quot;caseText&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">translateElement</span><span class="p">(</span><span class="s2">&quot;caseTitle&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">translateElement</span><span class="p">(</span><span class="nx">elemId</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'><span class="nx">url</span><span class="o">:</span> <span class="nx">translateUrl</span><span class="p">,</span>
</span><span class='line'><span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
</span><span class='line'><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span class='line'><span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'><span class="nx">q</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">elemId</span><span class="p">).</span><span class="nx">html</span><span class="p">()</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="c1">// TODO: I&#39;ve found that the returned translated text from Google may be incomplete</span>
</span><span class='line'><span class="c1">// if we send any   elements within the text. We should remove any occurrences</span>
</span><span class='line'><span class="c1">// of this in the input string.</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">elemId</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">translations</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">translatedText</span><span class="p">));</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>O que este código faz é apenas chamar a Action <strong>Translate</strong> que, por sua vez, chama a API do Google e retorna o JSON com o texto traduzido. Feito isso, a função <strong>translateElement</strong> apenas atualiza o conteúdo do elemento com a tradução.</p>

<p>Acredito que o código seja auto explicativo. Qualquer dúvida, por favor perguntem nos comentários :)</p>

<p>Documentação da api <a href="http://code.google.com/apis/language/translate/v2/using_rest.html">aqui</a> e <a href="http://code.google.com/apis/language/translate/v2/getting_started.html#JSONP">aqui</a>.</p>

<p>Abraços!</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2010-11-08T21:37:56-02:00" data-updated="true" itemprop="datePublished">Nov 8<span>th</span>, 2010</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2010/11/08/configurando-uma-ferramenta-de-diff-visual-para-svn-no-linux/" itemprop="url">Configurando Uma Ferramenta De Diff Visual Para SVN No Linux</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Cá estou eu aqui postando após vários dias parado. Tenho trabalhado diariamente com Ubuntu durante os últimos dias devido a um projeto em Rails 3 que estamos tocando aqui na <a href="http://www.quavio.com.br">Quavio</a>. Por isso, tenho penado bastante com configuração de ambiente, familiarização com o framework (ainda estou aprendendo muito) e, consequentemente, tenho tido ainda menos tempo do que o usual.</p>

<p>Vou aproveitar só para deixar um rápido passo-a-passo que utilizei para configurar uma ferramenta de diff visual para SVN no Ubuntu. No Windows eu vinha usando o ótimo <a href="http://winmerge.org/">WinMerge</a>. No Linux, fui recomendado ao <a href="http://meld.sourceforge.net/">meld</a> nesta <a href="http://stackoverflow.com/questions/1141686/visual-svn-diff-and-compare-tools-for-linux">pergunta</a> no stackoverflow. Bom, vamos aos passos:</p>

<ul>
<li><p><code>sudo apt-get install meld</code></p></li>
<li><p><code>gedit ~/diffwrap.sh</code></p></li>
<li><p>Cole o seguinte conteúdo dentro do arquivo recém criado e salve (adaptado <a href="http://svnbook.red-bean.com/en/1.2/svn.advanced.externaldifftools.html">daqui</a>):</p>

<p>!/bin/sh</p>

<h1>Configure your favorite diff program here.</h1>

<p>DIFF=&ldquo;/usr/local/bin/my-diff-tool&rdquo;</p>

<h1>Subversion provides the paths we need as the sixth and seventh</h1>

<h1>parameters.</h1>

<p>LEFT=${6}
RIGHT=${7}</p>

<h1>Call the diff command (change the following line to make sense for</h1>

<h1>your merge program).</h1>

<p>$DIFF $LEFT $RIGHT</p>

<h1>Return an errorcode of 0 if no differences were detected, 1 if some were.</h1>

<h1>Any other errorcode will be treated as fatal.</h1></li>
<li><p><code>chmod a+x diffwrap.sh</code></p></li>
<li><p><code>gedit ~/.subversion/config</code></p></li>
<li><p>Procure a linha onde diz &ldquo;diff-cmd&rdquo; (linha 57, no meu arquivo)</p></li>
<li><p>Remove o &ldquo;#&rdquo; do início da linha para descomentá-la</p></li>
<li><p>Digite /home/<nome do seu usuário>/diffwrap.sh no final da linha. O resultado deve ser algo assim: <code>diff-cmd = /home/&lt;nome do usuario&gt;/diffwrap.sh
</code>. Não esqueça de trocar <strong><nome do usuário></strong> pelo nome real do seu usuário no sistema</p></li>
<li><p>Pronto. Ao digitar <code>svn diff arquivo.rb</code>, o meld será executado com dois arquivos abertos: o seu, com suas modificações locais, e a cópia origina que está no repositório.</p></li>
</ul>


<p>Por hoje é isso. Nos próximos dias pretendo escrever um guia sobre como publicar uma aplicação Rails 3 do zero num cloud server do Rackspace.</p>

<p>Até mais!</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2010-10-14T20:34:37-03:00" data-updated="true" itemprop="datePublished">Oct 14<span>th</span>, 2010</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2010/10/14/opcoes-de-hospedagem-para-ruby/" itemprop="url">Opções De Hospedagem Para Ruby</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Na Quavio, empresa onde trabalho e sou um dos sócios, uma boa parcela dos projetos executados são basicamente sites e hotsites de clientes. Isto implica em necessidades específicas de hospedagem, como por exemplo, uma boa infraestrutura para envio/recebimento de emails (com webmail), painel de controle, suporte técnico para eventuais problemas de instabilidade, baixo custo mensal, pouca utilização de espaço em disco, backup automático, etc. Basicamente, não queremos nos responsabilizar pelo gerenciamento da infra-estrutura que abriga cada um destes projetos, que acabam se tornando muitos com o passar do tempo.</p>

<p>Resumindo, precisamos de um fornecedor de hospedagem que atenda a estas necessidades e que, ao mesmo tempo, ofereça um bom suporte às tecnologias que utilizamos.</p>

<p>Recentemente, decidimos por utilizar exclusivamente Ruby e, preferencialmente, Sinatra (ou Rails) para este tipo de projeto devido a uma série de fatores. Eu diria que os principais seriam a extrema simplicidade de uso e alta produtividade que obtemos com estas ferramentas.</p>

<p>Esta decisão, por sua vez, implica em uma maior dificuldade na escolha do nosso fornecedor de hospedagem, visto que a maioria deles simplesmente não possui suporte a estas tecnologias ou, se possui, é bastante precária ou ineficiente.</p>

<p>Vínhamos utilizando até então, preferencialmente, a <a href="http://www.kinghost.com.br">Kinghost</a> para este fim. Entretanto, chegamos à conclusão de que o suporte a Ruby on Rails é bastante precário e limitado. Isso pra não falar de Sinatra. Ao ligar para o Call Center, o atendente, que se dizia técnico, me pediu que soletrasse a palavra &ldquo;Sinatra&rdquo; para ele. Desisti na hora.</p>

<p>Outra opção era a <a href="http://www.kinghost.com.br">Locaweb</a>, que também vinhamos utilizamos em alguns casos específicos e que se mostrou relativamente satisfatória em se tratando de suporte a Ruby. Entretanto, considero o custo/benefício da Locaweb baixo (o preço da hospedagem compartilhada parte de R$ 29/mês) quando comparada a outras hospedagens gringas. Além disso, tivemos uns problemas sérios lá com SSH recentemente, o que nos deixou bastante insatisfeitos com o serviço da Locaweb também.</p>

<p>Não nos restaram muitas opções no Brasil, por isso estamos pensando seriamente em procurar alternativas fora daqui para hospedar nossos projetos. Eu realmente não queria ter que fazer isso, pois queriamos muito fomentar o desenvolvimento das hospedagens para essas tecnologias no Brasil, mas infelizmente não nos resta outra alternativa, já que não encontramos um fornecedor que nos atenda de forma satisfatória por aqui.</p>

<p>Não é à toa que vemos manifestações <a href="http://blog.kinghost.com.br/2010/09/empresas-de-hospedagem-de-sites-divulgam-esclarecimento/">deste tipo</a> no mercado brasileiro, pois concordo que a reclamação dos consumidores tem fundamento.</p>

<p>Aceito sugestões de boas hospedagens para Ruby/Sinatra/Rails no Brasil ou fora.</p>

<p>Me surpreendi positivamente esses dias com o excelente serviço que <a href="http://heroku.com">heroku</a> oferece. Achei fantástico. O deploy é simplesmente um git push. Mais fácil, impossível!</p>

<p>Seria muito bom termos algo nesse nível aqui no Brasil!</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2010-08-20T10:10:00-03:00" data-updated="true" itemprop="datePublished">Aug 20<span>th</span>, 2010</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2010/08/20/how-to-map-subdomains-in-windows-7/" itemprop="url">How to Map Subdomains in Windows 7</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Over the last days, I&rsquo;ve been working on implementing multiple subdomains with authentication in asp.net for the webapp I&rsquo;m currently working on.</p>

<p>There are a few steps needed in order to configure IIS, DNS and authentication.</p>

<ol>
<li>Select the website you&rsquo;re working on, in the IIS Manager screen, in the left side tree. Then, click the &ldquo;Bindings&rdquo; option in the right pane</li>
</ol>


<p><img src="/images/2010/8/bindings.png" alt="" /></p>

<ol>
<li><p>In the Site Bindings window, add each subdomain that you want to map to your site. Unfortunately, wildcard mapping is not supported, so you&rsquo;ll have to manually type all the subdomains before using it.</p></li>
<li><p>In the windows hosts file (C:\Windows\system32\drivers\etc\hosts), add up each subdomain again, pointing to 127.0.0.1 (see below):</p></li>
</ol>


<p><img src="/images/2010/8/hosts.png" alt="" /></p>

<ol>
<li>Lastly, you&rsquo;ll need to update your web.config cookies configuration, so that it is set to work with any subdomain. By default, your login cookies will only be valid for the default subdomain (example.com and www.example.com)</li>
</ol>


<p><authentication mode="Forms"></p>

<p><forms loginUrl="~/Account/Login" timeout="500000" **domain=".example.com"** /></p>

<p></authentication></p>

<p>Pay attention for the starting dot in the domain attribute. It is needed in order to work with any subdomain ;)</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2010-07-27T16:57:00-03:00" data-updated="true" itemprop="datePublished">Jul 27<span>th</span>, 2010</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2010/07/27/singleton-entity-framework-connection-maybe-not-a-good-idea/" itemprop="url">Singleton Entity Framework Connection: Maybe Not a Good Idea</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>I&rsquo;ve been working on an ASP.NET MVC web service that uses EF for persistence. Been using a good old repository class for handling the connection and returning the entities. At some point I decided to change my repository connection to a singleton.</p>

<p>At first, I thought it would make sense to always reuse the same connection all over the place. However, as days passed, the system started raising creepy EF exceptions at times and eventually entered on an inconsistent state where I had to restart IIS in order to return the system back up. This was really weird and scared the hell out of me.</p>

<p>So, as a note to self, please remember that using a singleton pattern for managing large application&rsquo;s DAL may not be a good idea. Please do not ask me why, because I don&rsquo;t have a clue for the reason why these problems happened. Instead, I decided just to revert changes back and just instantiate a new repository instance whenever I needed to access the data entities.</p>

<p>If anyone out there had a different experience or can explain why this can happen, please do not hesitate to leave me a comment as I would appreciate a lot!</p>

<p>Thanks!</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
        <a href="/" class="prev">Prev</a>
    
    
        <a href="/blog/page/3/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Felipe Lima


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
