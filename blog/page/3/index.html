
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Felipe Lima</title>
  <meta name="author" content="Felipe Lima">

  
  <meta name="description" content="There are a plenty of lightbox implementations around the web. Whenever you need one, you won&#8217;t need to make up your own for sure. Just pick &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://felipecsl.github.com/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Felipe Lima" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Felipe Lima</a></h1>
  
    <h2>weblog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:felipecsl.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/29/pure-as3-lightbox-clone/">Pure As3 Lightbox Clone</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-29T12:04:00-07:00" pubdate data-updated="true">Mar 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are a plenty of <a href="http://leandrovieira.com/projects/jquery/lightbox/">lightbox</a> <a href="http://www.huddletogether.com/projects/lightbox2/">implementations</a> around the web. Whenever you need one, you won&#8217;t need to make up your own for sure. Just pick one of the available options. However, if you&#8217;re restricted to flash only, the options get reduced drastically. This is why I came up with <a href="https://github.com/felipecsl/actionscript3-lightbox">my own lightbox</a> implementation with ActionScript. You can see it in action in my company&#8217;s <a href="http://www.quavio.com.br">website</a>.</p>

<p><img src="/images/2010/3/lightbox.png" alt="Flash Lightbox screenshot" /></p>

<p>It works just like the regular lightbox versions:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span><span class="o">:</span><span class="nx">Lightbox</span> <span class="nx">myLb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Lightbox</span><span class="p">(</span>
</span><span class='line'>  <span class="nx">_sTitle</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="c1">// lightbox title</span>
</span><span class='line'>  <span class="nx">_sLinkToVisit</span><span class="o">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>  <span class="c1">// link to the page that will be visited upon click</span>
</span><span class='line'>  <span class="nx">_sImageText</span><span class="o">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="s2">&quot;Imagem&quot;</span><span class="p">,</span> <span class="c1">// &#39;Image&#39; text</span>
</span><span class='line'>  <span class="nx">_sOfText</span><span class="o">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="s2">&quot;de&quot;</span><span class="p">);</span> <span class="c1">// &#39;Of&#39; text</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// shows the lighbox with the provided array of images</span>
</span><span class='line'><span class="nx">myLb</span><span class="p">.</span><span class="nx">show</span><span class="p">([</span><span class="s1">&#39;image1.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;image2.jpg&#39;</span><span class="p">,</span> <span class="p">...]);</span>
</span><span class='line'><span class="nx">myLb</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// closes the lightbox</span>
</span></code></pre></td></tr></table></div></figure>


<p>Please be aware that, in order to use it, you&#8217;ll have to create a Lightbox movieclip in the Flash IDE with the following elements inside it:</p>

<p><strong>_txtClientName</strong>,<strong> _txtCurrPos</strong>, <strong>_btnNext</strong>, <strong><em>btnPrev </em>btnClose</strong>, <strong>_bg</strong> and <strong>_btnAcesse</strong>.</p>

<p>These elements are referenced inside the Lightbox class, so you&#8217;ll need to create elements that match these names in the IDE so that the class will find them.</p>

<p>Additionally, you&#8217;ll need two static variables containing the stage original width and height. This is needed in order to automatically reposition the lightbox in the middle of the screen on stage resize.</p>

<p>Also, you&#8217;ll need to download <a href="http://www.greensock.com/tweenlite/">TweenLite</a> for the all the effects to work!</p>

<p>Please let me know if you have any suggestions of bug fixes and/or improvements and I will be happy to answer your requests.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/19/how-to-disable-annoying-request-validation/">How to Disable Annoying Request Validation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-19T08:10:00-07:00" pubdate data-updated="true">Mar 19<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If I summed it all up, I must have spent more than a day struggling to disable request validation with asp.net mvc. It is just ridiculously hard to disable it.</p>

<p>It turns out that the only way to disable it once and for all is a combination of a setting in the web.config and the ValidateRequestAttribute.</p>

<ol>
<li><p>Add the following line to your web.config file right after &lt;system.web>: <strong><httpRuntime requestValidationMode="2.0" /></strong></p></li>
<li><p>Add the <strong>[ValidateInput(false)]</strong> attribute to the controller <strong>and</strong> the action method you want to expose</p></li>
<li><p>Rebuild the project and go drink a beer.</p></li>
</ol>


<p>Remember it may be unsafe to disable request validation due to potential vulnerability <a href="http://en.wikipedia.org/wiki/Cross-site_scripting">XSS</a> and <a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">XSRF</a> attacks.</p>

<p>Note: This is targeted to ASP.NET 4, when the <a href="http://www.asp.net/(S(ywiyuluxr3qb2dfva1z5lgeg">requestValidationMode</a>)/learn/whitepapers/aspnet4/breaking-changes/#_TOC7) attribute was introduced. In .NET 3.5, you can skip the first step and only do 2 and 3, but I&#8217;m not 100% positive about that.</p>

<p>Happy coding :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/01/hands-on-mongodb-with-c/">Hands on MongoDB With C#</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-01T22:36:00-08:00" pubdate data-updated="true">Mar 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last couple days I&#8217;ve been experimenting with <a href="/admin/Pages/www.mongodb.com">MongoDB</a> and its <a href="http://github.com/samus/mongodb-csharp">C# driver</a>, cleverly written by Sam Corder. I&#8217;m investigating it as a replacement for a SQL Server database I am using in a web application that is higly community driven. This specific characteristic is the one that makes the <a href="http://en.wikipedia.org/wiki/NoSQL">NoSQL</a> movement rise atop regular RDBMS systems like SQL Server or MySQL, since it is hard to mantain relational integrity in these scenarios. Other key features of MongoDB are focus on performance and scalability.</p>

<p><a href="http://odetocode.com/Blogs/scott/archive/2009/10/13/experimenting-with-mongodb-from-c.aspx">K. Scott Allen</a> already wrote a quick intro on using the C# driver, so I used it as a tutorial for my first steps. Here are some thoughts I&#8217;d like to share on this topic:</p>

<ul>
<li>I don&#8217;t like being held by the verbosity of instantiating Document objects every time I want to manipulate the database, so I&#8217;ve written method overloads for the main operations, like Insert, Update, Find and Delete that receive a plain object and only then convert them to Document. This allows us to leverage anonymous objects in C# and makes the code cleaner:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">Mongo</span> <span class="n">mongo</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mongo</span><span class="p">();</span>
</span><span class='line'><span class="n">mongo</span><span class="p">.</span><span class="n">Connect</span><span class="p">();</span>
</span><span class='line'><span class="n">Database</span> <span class="n">db</span> <span class="p">=</span> <span class="n">mongo</span><span class="p">[</span><span class="err">“</span><span class="n">testdb</span><span class="err">”</span><span class="p">];</span>
</span><span class='line'><span class="kt">var</span> <span class="n">col</span> <span class="p">=</span> <span class="n">db</span><span class="p">[</span><span class="err">“</span><span class="n">users</span><span class="err">”</span><span class="p">];</span>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="n">Document</span> <span class="n">d</span> <span class="k">in</span> <span class="n">col</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="k">new</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="err">“</span><span class="n">John</span> <span class="n">Doe</span><span class="err">”</span><span class="p">}).</span><span class="n">Documents</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">johnId</span> <span class="p">=</span> <span class="n">d</span><span class="p">[</span><span class="err">”</span><span class="n">_id</span><span class="err">”</span><span class="p">];</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">johnName</span> <span class="p">=</span> <span class="n">d</span><span class="p">[</span><span class="err">“</span><span class="n">name</span><span class="err">”</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code with this implementation is available on my fork of the driver at <a href="http://github.com/felipecsl/mongodb-csharp">github</a> an will hopefully be merged with the master soon.</p>

<p>MongoDB allows storage of files in the database, as well, through the <a href="http://www.mongodb.org/display/DOCS/GridFS">GridFS specification</a>. The C# api is already implemented and functional. Follow an example for writing a file to the database:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">Mongo</span> <span class="n">mongo</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mongo</span><span class="p">();</span>
</span><span class='line'>    <span class="n">mongo</span><span class="p">.</span><span class="n">Connect</span><span class="p">();</span>
</span><span class='line'>    <span class="n">Database</span> <span class="n">db</span> <span class="p">=</span> <span class="n">mongo</span><span class="p">[</span><span class="err">“</span><span class="n">test</span><span class="err">”</span><span class="p">];</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">collection</span> <span class="p">=</span> <span class="n">db</span><span class="p">[</span><span class="err">“</span><span class="n">testcollection</span><span class="err">”</span><span class="p">];</span>
</span><span class='line'>    <span class="n">GridFile</span> <span class="n">file</span> <span class="p">=</span> <span class="k">new</span> <span class="n">GridFile</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
</span><span class='line'>    <span class="n">using</span><span class="p">(</span><span class="n">GridFileStream</span> <span class="n">fs</span> <span class="p">=</span> <span class="n">file</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="err">“</span><span class="n">mycv</span><span class="err">”</span><span class="p">))</span> <span class="c1">// define the file name</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">ReadWriteStream</span><span class="p">(</span><span class="n">File</span><span class="p">.</span><span class="n">OpenRead</span><span class="p">(</span><span class="err">@”</span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Data</span><span class="err">\</span><span class="n">felipelima_en</span><span class="p">.</span><span class="n">doc</span><span class="err">”</span><span class="p">),</span> <span class="n">fs</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">ReadWriteStream</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Stream</span> <span class="n">readStream</span><span class="p">,</span>
</span><span class='line'>    <span class="n">Stream</span> <span class="n">writeStream</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">Byte</span><span class="p">[]</span> <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Byte</span><span class="p">[</span><span class="n">Int16</span><span class="p">.</span><span class="n">MaxValue</span><span class="p">];</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">bytesRead</span> <span class="p">=</span> <span class="n">readStream</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">Int16</span><span class="p">.</span><span class="n">MaxValue</span><span class="p">);</span>
</span><span class='line'>    <span class="c1">// write the required bytes</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="p">(</span><span class="n">bytesRead</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">writeStream</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">bytesRead</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">bytesRead</span> <span class="p">=</span> <span class="n">readStream</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">Int16</span><span class="p">.</span><span class="n">MaxValue</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">readStream</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
</span><span class='line'>    <span class="n">writeStream</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Database files work just like plain Documents and will be assigned an Id upon creation. Therefore, they can be later queried just like a regular document.</p>

<p>This was just a quick glance over MongoDB and C# integration. I&#8217;m planning on using it on a large project and will post here my findings. More to come.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/21/the-magic-of-defaultmodelbinder/">The Magic of DefaultModelBinder</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-21T22:52:00-08:00" pubdate data-updated="true">Feb 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last days I had to implement a custom model binding for a dynamic view model in a project I&#8217;m working on. This had me diving deep in the DefaultModelBinder implementation and how binding works in ASP.NET MVC.</p>

<p>Basically the request carries the data you controller action needs to perform its work. It may come from several different locations, like form variables, the query string and route data, in the form of key/value pairs, string-encoded.</p>

<p>Usually, the DefaultModelBinder implementation will be just fine for you and no additional work will be needed. However, there are situations where we need to tweak settings a bit. Model binding works in a associative manner, where you can assign a binder to a specific type, like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">ModelBinders</span><span class="p">.</span><span class="n">Binders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span>
</span><span class='line'>  <span class="k">typeof</span><span class="p">(</span><span class="n">DateTime</span><span class="p">),</span>
</span><span class='line'>  <span class="n">newDateTimeModelBinder</span><span class="p">());</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we&#8217;re saying that all DateTime values should be bound using the DateTimeModelBinder class. DefaultModelBinder will figure that out and call this class when it sees a property of DateTime type. We could say that it works recursivly by looking for the appropriate binder for each property. If no custom binder is found, DefaultModelBinder will take care of it anyway.</p>

<p><img src="http://i.pbase.com/o4/60/687660/1/64594355.dte2s9SV.ropeknot.JPG" alt="" /></p>

<p>The IModelBinder interface defines a single method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="kt">object</span> <span class="nf">BindModel</span><span class="p">(</span><span class="n">ControllerContext</span> <span class="n">controllerContext</span><span class="p">,</span> <span class="n">ModelBindingContext</span> <span class="n">bindingContext</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <strong>bindingContext</strong> argument contains information about the mode (type, metadata, name, etc). All you have to do is to use the <strong>bindingContext.ValueProvider</strong> collection to retrieve the correct data for the given model and return it.</p>

<p>Apart from everything, I strongly recommend building the asp.net mvc source code instead of using the installer, so you can debug/step into the mvc classes. You can download the latest MVC 2 RC 2 source code from <a href="http://aspnet.codeplex.com/releases/view/39978#DownloadId=104717">codeplex</a>. Just do not forget to uninstall MVC from the GAC before building or you&#8217;ll get ambiguous references.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/26/model-binding-in-asp-net-mvc/">Model Binding in ASP.NET MVC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-26T11:30:00-08:00" pubdate data-updated="true">Jan 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://i.zdnet.com/blogs/agile-is-cool.jpg" alt="" /></p>

<p>Ever since I started discovering the MVC world I decided to completely forget Web Forms and actually adopt asp.net MVC as my web programming framework of choice. What&#8217;s great about it is that you have complete control over the generated html output and absolute separation of business logic, presentation layer and model. It&#8217;s all about <a href="http://en.wikipedia.org/wiki/Convention_over_configuration">convention over configuration</a>! This is one of the reasons why I decided to learn Ruby on Rails some time ago. It is clear that the <strike>ASP.NET MVC</strike> .NET Framework 3.5 SP1 release was somewhat influenced by Rails.</p>

<p>One of the great things about ASP.NET MVC is model binding. K. Scott Allen wrote a <a href="http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx">great blog post</a> with tips on binding. Basically, it collects your request data and fills up your view model with the incoming data.</p>

<p>There is a search pattern that the DefaultModelBinder uses to look for the data in the request. Basically you need to name your form elements with the same name of your model properties. For example:</p>

<ol>
<li>The view model:</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">NewsModuleViewModel</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="na">    [ScaffoldColumn(false)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">int</span> <span class="n">ID</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(“News Date”)]</span>
</span><span class='line'><span class="na">    [DisplayFormat(DataFormatString = “d”, ApplyFormatInEditMode = true)]</span>
</span><span class='line'><span class="na">    [Required(ErrorMessage = “Por favor selecione uma data”)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">Date</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(“Title”)]</span>
</span><span class='line'><span class="na">    [Required(ErrorMessage = “Por favor digite um titulo”)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(“Resume”)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Resume</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(“My Text”)]</span>
</span><span class='line'><span class="na">    [UIHint(“HtmlText”)]</span>
</span><span class='line'><span class="na">    [Required(ErrorMessage = “Por favor digite um texto para a noticia”)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Text</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(“Image”)]</span>
</span><span class='line'><span class="na">    [UIHint(“DbImage”, null, “AspectRatio”, 1.0)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">ImagePath</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The form:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">”/uac/NewsModule/Edit/12”</span> <span class="na">enctype=</span><span class="s">”multipart/form-data”</span> <span class="na">method=</span><span class="s">”post”</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">”datalist-form”</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">”Date”</span><span class="nt">&gt;</span>Date<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">”text”</span> <span class="na">id=</span><span class="s">”Date”</span> <span class="na">name=</span><span class="s">”Date”</span> <span class="na">value=</span><span class="s">”22/1/2010”</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">”datalist-form”</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">”Title”</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>        <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">”text-box</span> <span class="na">single-line</span><span class="err">”</span> <span class="na">id=</span><span class="s">”Title”</span> <span class="na">name=</span><span class="s">”Title”</span> <span class="na">type=</span><span class="s">”text”</span> <span class="nt">/&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>     <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">”datalist-form”</span><span class="nt">&gt;</span>
</span><span class='line'>         <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">”Resume”</span><span class="nt">&gt;</span>Resume<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>         <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">”text-box</span> <span class="na">single-line</span><span class="err">”</span> <span class="na">id=</span><span class="s">”Resume”</span> <span class="na">name=</span><span class="s">”Resume”</span> <span class="na">type=</span><span class="s">”text”</span> <span class="nt">/&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>(I&#8217;ve reduced the HTML markup snippet for the sake of simplicity).</p>

<p>Please note that the input field name properties match the view model property names. The DefaultModelBinder will look for these names when doing the data binding!</p>

<p><a href="http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx">
You can even bind complex objects like lists</a>, for example, but, in this case, you&#8217;ll have to name your input fields according to the element index on the list! Eg.:</p>

<pre><code>&lt;span class="lnum"&gt;   1:  &lt;/span&gt;&lt;span class="kwrd"&gt;&lt;&lt;/span&gt;&lt;span class="html"&gt;input&lt;/span&gt; &lt;span class="attr"&gt;type&lt;/span&gt;&lt;span class="kwrd"&gt;="text"&lt;/span&gt; &lt;span class="attr"&gt;name&lt;/span&gt;&lt;span class="kwrd"&gt;="&lt;strong&gt;ImageList[0].FileName&lt;/strong&gt;" size="&lt;/span&gt;&lt;span class="attr"&gt;44&lt;/span&gt;" &lt;span class="kwrd"&gt;/&gt;&lt;/span&gt;
</code></pre>

<p>It is really straightforward once you get used to it. Just always make sure to create a ViewModel class for you, instead of using the data classes directly (eg.: with LINQ to SQL).</p>

<p>If you need to bind uploaded files as well, it gets a bit more complicated. The best solution I&#8217;ve found so far was <strong>not </strong>to bind file input control and later retrieve the uploaded file in the controller action from the Request.Files collection.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/12/02/an-alternative-for-viewing-grid-row-details-in-asp-net-dynamic-data/">An Alternative for Viewing Grid Row Details in ASP.NET Dynamic Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-02T10:25:00-08:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With ASP.NET Dynamic Data you get an entire dynamic data-driven website for free with almost no effort. Of course this has drawbacks, which is that in fact you lose some flexibility and need to do things in the way they <strong>can</strong> be done.</p>

<p>Recently I needed to improve the default List.aspx template GridView with some different colors and per-line selection for entry details, instead of clicking through an DynamicHyperlink. The first step was to attach an OnRowDataBound event in the grid, in order to set up on onmouseover event in the data rows:</p>

<p>DynamicData\PageTemplates\List.aspx:</p>

<p>[code:c#]</p>

<p>&lt;asp:GridView ID=&#8221;GridView1&#8221; runat=&#8221;server&#8221; DataSourceID=&#8221;GridDataSource&#8221; EnablePersistedSelection=&#8221;true&#8221; <strong>OnRowDataBound=&#8221;GridView_RowDataBound&#8221;</strong>></p>

<p>[/code]</p>

<p>Next, attach the event and set up the event (DynamicData\PageTemplates\List.aspx.cs):</p>

<p>[code:c#]</p>

<p>protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)</p>

<p>{</p>

<p>if (e.Row.RowType == DataControlRowType.DataRow)</p>

<p>{</p>

<p>e.Row.Attributes[&#8220;onclick&#8221;] = &#8220;location.href = &#8216;&#8221; + table.GetActionPath(&#8220;Details&#8221;, e.Row.DataItem) + &#8220;&#8217;&#8221;;</p>

<p>}</p>

<p>}</p>

<p>[/code]</p>

<p>And I&#8217;ts all done. You get an entire row click selection for the entry details :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/11/15/customizing-asp-net-membership-information-with-profiles/">Customizing ASP.NET Membership Information With Profiles</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-15T14:51:00-08:00" pubdate data-updated="true">Nov 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ASP.NET offers a powerful built-in provider-based support for membership, roles and profile management. That means you get a fully functional set of features for free on your project just out of the box.</p>

<p>I&#8217;ve been working in order to integrate membership and profile management into a MVC application I am developing, so I had to refresh my mind on these topics. There are some gotchas around these topics that are worth sharing.</p>

<p>First of all, the default ASP.NET providers implementation for membership, roles and profiles are based on SQL Server database storage, so you&#8217;ll have to configure one to start playing. A gotcha here is to run the aspnet_regsql tool to generate the required tables, schemas, stored procedures, etc. in order for the providers to work. Do not forget also to configure them correctly in the web.config file, including the connectionStringName and applicationName properties (very important!).</p>

<p>There are several resources and tutorials around the net explaining how to set up these providers to start working. For profile management, I recommend <a href="http://odetocode.com/Articles/440.aspx">this one</a>. Profiles are the way to go if you need to include additional information pertaining your application users, so, instead of creating a custom membership provider, get along with the default one and set up profile properties in the web.config file. These settings are then stored in the database and associated with the user that is currently logged on. It is possible to add profile data to anonymous users, also, which is great!</p>

<p>So, in order to integrate it with your MVC application, you can easily store and retrieve your profile properties inside your Controller with <strong>this.HttpContext.Profile[&#8220;ProfilePropertyName&#8221;].</strong></p>

<p>Also, do not forget to declare your property in the web.config file this way:</p>

<p>[code:xml]</p>

<p><profile defaultProvider="AspNetSqlProfileProvider"></p>

<p><providers></p>

<p><clear/></p>

<p>&lt;add name=&#8221;AspNetSqlProfileProvider&#8221;</p>

<p>type=&#8221;System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&#8221;</p>

<p>connectionStringName=&#8221;tagsdConnectionString&#8221;</p>

<p>applicationName=&#8221;/&#8221;</p>

<p>/></p>

<p></providers></p>

<p><properties></p>

<p><add name="ProfilePropertyName" type="System.String"/></p>

<p></properties></p>

<p></profile></p>

<p>[/code]</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/10/22/asp-net-mvc-custom-errors-with-the-handleerror-attribute/">ASP.NET MVC Custom Errors With the HandleError Attribute</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-22T01:57:00-07:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Handling exceptions in ASP.NET MVC is quite easy once you get to know the details surrounding the HandleError attribute. You can specify that a controller or a specific Action will handle errors and you can even choose which View to show based on the exception being thrown. Scott Guthrie <a href="http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx">wrote</a> about this.</p>

<p>What he didn&#8217;t tell us, is that there are some prerequisites for it to work as expected. First of all, you need to enable custom errors in the application web.config file:</p>

<p><customErrors mode="On" /></p>

<p>Second, the order that you put the HandleError attributes will affect which View will actualy gonna be rendered at the end. I was trying to render a custom view based on an InvalidOperationException being throw on my action. The code looked like this:</p>

<pre><code>&lt;span class="lnum"&gt;   1:  &lt;/span&gt;[HandleError]






&lt;span class="lnum"&gt;   2:  &lt;/span&gt;&lt;span class="kwrd"&gt;public&lt;/span&gt; &lt;span class="kwrd"&gt;class&lt;/span&gt; HomeController : QuavioController






&lt;span class="lnum"&gt;   3:  &lt;/span&gt;{






&lt;span class="lnum"&gt;   4:  &lt;/span&gt;        [HandleError(ExceptionType = &lt;span class="kwrd"&gt;typeof&lt;/span&gt;(InvalidOperationException), View = &lt;span class="str"&gt;"InvalidOpJoinRoom"&lt;/span&gt;)]






&lt;span class="lnum"&gt;   5:  &lt;/span&gt;        &lt;span class="kwrd"&gt;public&lt;/span&gt; ActionResult JoinRoom()






&lt;span class="lnum"&gt;   6:  &lt;/span&gt;        {






&lt;span class="lnum"&gt;   7:  &lt;/span&gt;             &lt;span class="kwrd"&gt;throw&lt;/span&gt; &lt;span class="kwrd"&gt;new&lt;/span&gt; InvalidOperationException();






&lt;span class="lnum"&gt;   8:  &lt;/span&gt;        }






&lt;span class="lnum"&gt;   9:  &lt;/span&gt;}
</code></pre>

<p>What happened is that the JoinRoom was returning the shared Error View, instead of the InvalidOpJoinRoom View. This happens because the HomeController contains a HandleError attribute (line 1), which overrides the JoinRoom&#8217;s HandleError behavior (line 4), which should return the InvalidOpJoinRoom View.</p>

<p>The fix is very simple: Remove the HandleError atribute from the controller and let the actual actions define the proper error handling behavior.</p>

<p>Conclusion: Be aware that multiple HandleError attributes in a controller may alter the order which View evaluation is executed and then causing the final View not to be the view you were actually expecting.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/10/21/asp-net-mvc-and-iis-6/">ASP.NET MVC and IIS 6</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-21T00:01:00-07:00" pubdate data-updated="true">Oct 21<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve been playing lately with ASP.NET MVC 2 Preview 2. I had no previous experience with this and it has been kind of a change in paradigms changing from web forms to mvc. At the same time, I feel very excited about this and believe that It is a big step forward when compared to web forms, mainly due to the separation of concerns and responsibilities.</p>

<p>As a drawback, It is very weird not to be able to drop ASP.NET server controls in the page. Initially, you&#8217;ll feel a bit &#8216;lost&#8217;. MVC uses a different method to render the page. You don&#8217;t have the runat=&#8217;server&#8217; stuff anymore so, instead, you&#8217;ll have to render the page mostly based on what you have in your ViewData. It&#8217;s not my objective to explain its functionality here, but you can find further information at the <a href="http://www.asp.net/mvc/">official MVC website</a>. The latest release can be downloaded from <a href="http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=33836">CodePlex</a>.</p>

<p>While testing my application in my hosting provider, I had a big headache since they have Windows 2003 Server installed, which comes with IIS 6. ASP.NET MVC requires a bit of work in order to work with IIS6, especially if your hosting provider does not have MVC installed in the GAC.</p>

<p>I would definitely suggest <a href="http://haacked.com/">Phil Haack&#8217;s blog</a> as the first point for reference on this subject. There are two key posts regarding this issue that I followed in order to make it work.</p>

<p>First of all, MVC assembly needs to be deployed in the application Bin directory if it is not installed in the server. Detailed info <a href="http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx">here</a>.</p>

<p>Second, you&#8217;ll need to change the application routes for IIS 6 to correctly receive the requests and forward them to the controllers. Haacked.com walkthrough <a href="http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx">here</a>.</p>

<p>As a last tip, I also found out that my MVC application wouldn&#8217;t work if I used VS Publish tool to send it to the production server after following the two steps above. No clue why, but just copying the whole website files to the server worked fine. Weird!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/10/03/how-to-fix-image-upload-with-fckeditor-and-asp-net/">How to Fix Image Upload With FCKEditor and ASP.NET</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-03T04:52:00-07:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="/admin/Pages/ckeditor.com">CKEditor</a> is a great open source wysiwyg editor for the web. It was formerly called FCKEditor and, one of its previous versions contained a nice implementation for ASP.NET integration. The current version (3.0) has been completely rebuilt from scratch and does not support quick upload yet (I read in the forums it will be available in version 3.1).</p>

<p>I&#8217;ve been using the FCKEditor  2.6.3 for .NET, which includes an ASP.NET control for seamless integration. However, I could never make one of its great features to work: the ability to upload images on the fly and embed them in the text. There are some things that need to be set up before.</p>

<pre><code>1. FCKEditor config file (fckconfig.js), when you download it, comes with its connectors default language to php. You need to change it to aspx:



var _FileBrowserLanguage    = 'aspx' ;  // asp | aspx | cfm | lasso | perl | php | py 


var _QuickUploadLanguage    = 'aspx' ;  // asp | aspx | cfm | lasso | perl | php | py  




2. Configure the folder that contains the fckeditor scripts in FCKEditor.cs (You will need to create a virtual directory in IIS with this path):






[ DefaultValue( "/fckeditor/" ) ]






public string BasePath 






3. Enable the upload connector in fckeditor\editor\filemanager\connectors\aspx\config.ascx (SECURITY WARNING: do not forget to implement    authentication verification here!):






private bool CheckAuthentication()






{ return true; }






4. Configure the directory that will receive the uploaded images (same file as above) - This can be overriden in your website web.config appSettings    section, creating a setting called FCKeditor:UserFilesPath






UserFilesPath = "/userfiles/";
</code></pre>

<p>This should be  everything that is needed in order to make file upload to work. See ya!</p>

<p>For those of you that saw this working fine in your development machine but  unexplainably not working on the production server, please refer to <a href="http://cksource.com/forums/viewtopic.php?f=6&amp;t=12112">this forum post</a> for the fix.</p>

<p>Another issue that I found regarding the update above is that in a server, it did not fix the problem an I was getting a &#8216;permission denied&#8217; JS error on the window.parent.OnUploadCompleted event. If that happens, try <a href="http://dev.fckeditor.net/ticket/2115">this fix</a> (scroll to the bottom of the page for the code)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/31/starting-with-android-managing-images/">Starting with Android - managing images</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/31/when-two-identical-strings-are-different/">When two identical strings are different?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/14/getting-started-with-chef/">Getting started with Chef</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/05/protip-delete-words-on-iterm2-mac-osx/">Protip: Delete words on iTerm2 (Mac OSX)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/24/wombat-0-4-0-released/">Wombat 0.4.0 released!</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/felipecsl">@felipecsl</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'felipecsl',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Felipe Lima -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
